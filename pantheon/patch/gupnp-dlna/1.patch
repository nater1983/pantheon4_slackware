From 36b9e1dfcf5f7d4529d69bea728c3bd09e7b25cf Mon Sep 17 00:00:00 2001
From: Doomsdayrs <doomsdayrs@gmail.com>
Date: Tue, 10 May 2022 21:39:47 +0000
Subject: [PATCH] Convert README to MD

---
 README => README.md | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)
 rename README => README.md (94%)

diff --git a/README b/README.md
similarity index 94%
rename from README
rename to README.md
index d877eb1..b05d809 100644
--- a/README
+++ b/README.md
@@ -1,5 +1,4 @@
-GUPnP DLNA
-==========
+# GUPnP DLNA
 
 GUPnP is an object-oriented open source framework for creating UPnP devices and
 control points, written in C using GObject and libsoup. The GUPnP API is
-- 
GitLab

From 0a2730ccd2b39dc3208833aab69d3a0931d50a38 Mon Sep 17 00:00:00 2001
From: Jens Georg <mail@jensge.org>
Date: Thu, 10 Nov 2022 11:54:35 +0100
Subject: [PATCH] build: Remove -Wdeclaration-after-statement

This does not seem to cope well with C99/C11 being default apparently
---
 m4/ax_compiler_flags_cflags.m4 | 1 -
 1 file changed, 1 deletion(-)

diff --git a/m4/ax_compiler_flags_cflags.m4 b/m4/ax_compiler_flags_cflags.m4
index f470f8f..cffc5e6 100644
--- a/m4/ax_compiler_flags_cflags.m4
+++ b/m4/ax_compiler_flags_cflags.m4
@@ -71,7 +71,6 @@ AC_DEFUN([AX_COMPILER_FLAGS_CFLAGS],[
             -Wredundant-decls dnl
             -Wno-unused-parameter dnl
             -Wno-missing-field-initializers dnl
-            -Wdeclaration-after-statement dnl
             -Wformat=2 dnl
             -Wold-style-definition dnl
             -Wcast-align dnl
-- 
GitLab

From fab553e92483bc4e0bccb4a3604c97b997552b2f Mon Sep 17 00:00:00 2001
From: Andre Klapper <a9016009@gmx.de>
Date: Thu, 14 Mar 2024 22:27:01 +0100
Subject: [PATCH] configure.ac: Replace defunct Bugzilla with GitLab URI

---
 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/configure.ac b/configure.ac
index b772317..c1d4d8a 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1,7 +1,7 @@
 AC_PREREQ([2.63])
 AC_INIT([gupnp-dlna],
         [0.12.0],
-        [https://bugzilla.gnome.org/enter_bug.cgi?product=gupnp&component=gupnp-dlna],
+        [https://gitlab.gnome.org/GNOME/gupnp-dlna/-/issues],
         [gupnp-dlna],
         [http://www.gupnp.org/])
 
-- 
GitLab

From 90f224aea39bc1ccfcdd3c0a10febaa9843b4a35 Mon Sep 17 00:00:00 2001
From: Jens Georg <mail@jensge.org>
Date: Thu, 10 Nov 2022 12:01:53 +0100
Subject: [PATCH] build: Version bump

---
 meson.build | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/meson.build b/meson.build
index 55f9ba3..4b275f9 100644
--- a/meson.build
+++ b/meson.build
@@ -1,7 +1,7 @@
 project(
     'gupnp-dlna',
     'c',
-    version: '0.12.0'
+    version: '0.13.0'
 )
 
 pkg = import('pkgconfig')
-- 
GitLab

From 7f58ac1e335fb6979b603139932dcdb6b7d3cba8 Mon Sep 17 00:00:00 2001
From: Jens Georg <mail@jensge.org>
Date: Thu, 10 Nov 2022 12:06:09 +0100
Subject: [PATCH] build: Remove autotools

---
 Makefile.am                                   |  31 ---
 autogen.sh                                    |  45 ---
 common.am                                     |   1 -
 configure.ac                                  | 203 --------------
 data/Makefile.am                              |  28 --
 doc/Makefile.am                               |  10 -
 doc/gupnp-dlna-gst/Makefile.am                |  92 ------
 doc/gupnp-dlna-metadata/Makefile.am           |  90 ------
 doc/gupnp-dlna/Makefile.am                    | 102 -------
 gupnp-dlna-2.0.pc.in                          |  12 -
 gupnp-dlna-gst-2.0.pc.in                      |  10 -
 gupnp-dlna-metadata-2.0.pc.in                 |  11 -
 libgupnp-dlna/Makefile.am                     | 261 ------------------
 .../metadata-backends/gstreamer/gstreamer.am  |  59 ----
 libgupnp-dlna/metadata/metadata.am            |   2 -
 m4/ax_append_compile_flags.m4                 |  65 -----
 m4/ax_append_flag.m4                          |  71 -----
 m4/ax_check_compile_flag.m4                   |  74 -----
 m4/ax_check_enable_debug.m4                   | 113 --------
 m4/ax_compiler_flags.m4                       | 158 -----------
 m4/ax_compiler_flags_cflags.m4                | 132 ---------
 m4/ax_compiler_flags_gir.m4                   |  60 ----
 m4/ax_compiler_flags_ldflags.m4               |  75 -----
 m4/ax_is_release.m4                           |  69 -----
 m4/ax_require_defined.m4                      |  37 ---
 m4/introspection.m4                           |  94 -------
 m4/vapigen.m4                                 |  43 ---
 tests/Makefile.am                             |  30 --
 tests/old/Makefile.am                         |  17 --
 tools/Makefile.am                             |  27 --
 vala/Makefile.am                              |  67 -----
 31 files changed, 2089 deletions(-)
 delete mode 100644 Makefile.am
 delete mode 100755 autogen.sh
 delete mode 100644 common.am
 delete mode 100644 configure.ac
 delete mode 100644 data/Makefile.am
 delete mode 100644 doc/Makefile.am
 delete mode 100644 doc/gupnp-dlna-gst/Makefile.am
 delete mode 100644 doc/gupnp-dlna-metadata/Makefile.am
 delete mode 100644 doc/gupnp-dlna/Makefile.am
 delete mode 100644 gupnp-dlna-2.0.pc.in
 delete mode 100644 gupnp-dlna-gst-2.0.pc.in
 delete mode 100644 gupnp-dlna-metadata-2.0.pc.in
 delete mode 100644 libgupnp-dlna/Makefile.am
 delete mode 100644 libgupnp-dlna/metadata-backends/gstreamer/gstreamer.am
 delete mode 100644 libgupnp-dlna/metadata/metadata.am
 delete mode 100644 m4/ax_append_compile_flags.m4
 delete mode 100644 m4/ax_append_flag.m4
 delete mode 100644 m4/ax_check_compile_flag.m4
 delete mode 100644 m4/ax_check_enable_debug.m4
 delete mode 100644 m4/ax_compiler_flags.m4
 delete mode 100644 m4/ax_compiler_flags_cflags.m4
 delete mode 100644 m4/ax_compiler_flags_gir.m4
 delete mode 100644 m4/ax_compiler_flags_ldflags.m4
 delete mode 100644 m4/ax_is_release.m4
 delete mode 100644 m4/ax_require_defined.m4
 delete mode 100644 m4/introspection.m4
 delete mode 100644 m4/vapigen.m4
 delete mode 100644 tests/Makefile.am
 delete mode 100644 tests/old/Makefile.am
 delete mode 100644 tools/Makefile.am
 delete mode 100644 vala/Makefile.am

diff --git a/Makefile.am b/Makefile.am
deleted file mode 100644
index 7e6e0e2..0000000
--- a/Makefile.am
+++ /dev/null
@@ -1,31 +0,0 @@
-ACLOCAL_AMFLAGS = -I m4 ${ACLOCAL_FLAGS}
-
-EXTRA_DIST = meson.build meson_options.txt
-
-SUBDIRS = libgupnp-dlna tools tests data doc vala
-
-pkgconfig_DATA = gupnp-dlna-2.0.pc gupnp-dlna-metadata-2.0.pc
-pkgconfigdir = $(libdir)/pkgconfig
-
-if GSTREAMER_METADATA_BACKEND_ENABLED
-pkgconfig_DATA += gupnp-dlna-gst-2.0.pc
-endif
-
-DISTCHECK_CONFIGURE_FLAGS = --enable-gtk-doc --enable-introspection
-
-# Extra clean files so that maintainer-clean removes *everything*
-MAINTAINERCLEANFILES = aclocal.m4 compile config.guess config.sub configure depcomp install-sh ltmain.sh Makefile.in missing config.h.in
-
-dist-hook:
-	@if test -d "$(srcdir)/.git"; \
-	then \
-		echo Creating ChangeLog && \
-		( cd "$(top_srcdir)" && \
-		  echo '# Generated by Makefile. Do not edit.'; echo; \
-		  $(top_srcdir)/build-aux missing --run git log --stat ) > ChangeLog.tmp \
-		&& mv -f ChangeLog.tmp $(top_distdir)/ChangeLog \
-		|| ( rm -f ChangeLog.tmp ; \
-		     echo Failed to generate ChangeLog >&2 ); \
-	else \
-		echo A git clone is required to generate a ChangeLog >&2; \
-	fi
diff --git a/common.am b/common.am
deleted file mode 100644
index bf8751f..0000000
--- a/common.am
+++ /dev/null
@@ -1 +0,0 @@
-shareddir = $(datadir)/gupnp-dlna-2.0
diff --git a/configure.ac b/configure.ac
deleted file mode 100644
index c1d4d8a..0000000
--- a/configure.ac
+++ /dev/null
@@ -1,203 +0,0 @@
-AC_PREREQ([2.63])
-AC_INIT([gupnp-dlna],
-        [0.12.0],
-        [https://gitlab.gnome.org/GNOME/gupnp-dlna/-/issues],
-        [gupnp-dlna],
-        [http://www.gupnp.org/])
-
-AC_CONFIG_HEADERS([config.h])
-AC_CONFIG_SRCDIR(libgupnp-dlna/gupnp-dlna-profile.h)
-AC_CONFIG_MACRO_DIR([m4])
-AC_CONFIG_AUX_DIR([build-aux])
-
-AM_INIT_AUTOMAKE([1.11 tar-ustar no-dist-gzip dist-xz])
-AM_MAINTAINER_MODE([enable])
-
-AM_SILENT_RULES([yes])
-
-AX_REQUIRE_DEFINED([GTK_DOC_CHECK])
-AX_REQUIRE_DEFINED([GOBJECT_INTROSPECTION_CHECK])
-AX_CHECK_ENABLE_DEBUG([yes])
-
-dnl library versioning
-dnl Increase when changing the API
-GUPNP_DLNA_CURRENT=4
-
-dnl Update when changing implementation of current API,
-dnl reset to 0 when changing CURRENT.  This is the revision of
-dnl current API version
-GUPNP_DLNA_REVISION=0
-
-dnl Increase if API change is ABI compatible, otherwise reset to 0
-GUPNP_DLNA_AGE=0
-
-GUPNP_DLNA_VERSION_INFO="$GUPNP_DLNA_CURRENT:$GUPNP_DLNA_REVISION:$GUPNP_DLNA_AGE"
-AC_SUBST(GUPNP_DLNA_VERSION_INFO)
-
-# Check for programs
-AC_PROG_CC
-AC_HEADER_STDC
-
-AX_IS_RELEASE([git-directory])
-AX_COMPILER_FLAGS([WARN_CFLAGS])
-
-# Initialize libtool
-LT_PREREQ([2.2])
-LT_INIT([win32-dll])
-
-PKG_CHECK_MODULES([LIBXML], [libxml-2.0 >= 2.5.0])
-
-AM_PROG_CC_C_O
-
-AC_ARG_WITH([default-metadata-backend],
-            [AS_HELP_STRING([--with-default-metadata-backend=your_backend],
-                            [set a default metadata backend @<:@default=gstreamer@:>@])])
-
-if test "x$with_default_metadata_backend" = 'x'
-then
-        with_default_metadata_backend='gstreamer'
-fi
-
-if test "x$with_default_metadata_backend" = 'xyes' || test "x$with_default_metadata_backend" = 'xno'
-then
-        AC_MSG_WARN([Dubious default metadata backend name: $with_default_metadata_backend])
-fi
-
-GUPNP_DLNA_METADATA_BACKEND_CFLAGS="$GUPNP_DLNA_METADATA_BACKEND_CFLAGS -DGUPNP_DLNA_DEFAULT_METADATA_BACKEND=\\\"$with_default_metadata_backend\\\""
-
-AC_ARG_ENABLE([gstreamer-metadata-backend],
-              [AS_HELP_STRING([--enable-gstreamer-metadata-backend],
-                              [build a GStreamer metadata backend @<:@default=auto@:>@])],
-                              ,
-                              [enable_gstreamer_metadata_backend=auto])
-
-if test "x$enable_gstreamer_metadata_backend" != 'xno'
-then
-        gstreamer_found='yes'
-        GST_MAJORMINOR=1.0
-        GST_REQ=1.0
-        GSTPBU_REQ=1.0
-
-        PKG_CHECK_MODULES([GST],
-                          [gstreamer-$GST_MAJORMINOR >= $GST_REQ],
-                          ,
-                          [gstreamer_found='no'])
-        PKG_CHECK_MODULES([GST_PBU],
-                          [gstreamer-pbutils-$GST_MAJORMINOR >= $GSTPBU_REQ],
-                          ,
-                          [gstreamer_found='no'])
-
-        if test "x$gstreamer_found" = 'xyes'
-        then
-                AC_SUBST(GST_MAJORMINOR)
-
-                GST_CFLAGS="$GST_CFLAGS -DGST_USE_UNSTABLE_API"
-                AC_SUBST(GST_CFLAGS)
-                enable_gstreamer_metadata_backend='yes'
-        elif test "x$enable_gstreamer_metadata_backend" = 'xyes'
-        then
-                AC_MSG_ERROR([GStreamer $GST_MAJORMINOR not found.])
-        else
-                enable_gstreamer_metadata_backend='no'
-        fi
-fi
-
-if test "x$enable_gstreamer_metadata_backend" = 'xyes'
-then
-        AM_CONDITIONAL(GSTREAMER_METADATA_BACKEND_ENABLED, true)
-else
-        AM_CONDITIONAL(GSTREAMER_METADATA_BACKEND_ENABLED, false)
-fi
-
-AC_ARG_WITH([default-metadata-backend-dir],
-            [AS_HELP_STRING([--with-default-metadata-backend-dir=your_directory],
-                            [set a default metadata backend directory @<:@default=$libdir/$PACKAGE_NAME@:>@])])
-
-if test "x$with_default_metadata_backend_dir" = 'x'
-then
-        with_default_metadata_backend_dir="$libdir/$PACKAGE_NAME"
-fi
-
-if test "x$with_default_metadata_backend_dir" = 'xyes' || test "x$with_default_metadata_backend_dir" = 'xno'
-then
-        AC_MSG_WARN([Dubious default metadata backend directory: $with_default_metadata_backend_dir])
-fi
-
-AC_SUBST(METADATA_DIRECTORY, $with_default_metadata_backend_dir)
-
-GUPNP_DLNA_METADATA_BACKEND_CFLAGS="$GUPNP_DLNA_METADATA_BACKEND_CFLAGS -DGUPNP_DLNA_DEFAULT_METADATA_BACKEND_DIR=\\\"$with_default_metadata_backend_dir\\\""
-
-AC_SUBST(GUPNP_DLNA_METADATA_BACKEND_CFLAGS)
-
-PKG_CHECK_MODULES([GLIB], [glib-2.0 >= 2.38])
-PKG_CHECK_MODULES([GOBJECT], [gobject-2.0])
-PKG_CHECK_MODULES([GMODULE], [gmodule-2.0])
-
-# Debugging
-AC_ARG_ENABLE([debug],
-              AS_HELP_STRING([--enable-debug], [enable debugging @<:@default=no@:>@]),
-              ,
-              [enable_debug=no])
-if test "x$enable_debug" = "xyes"; then
-        CFLAGS="$CFLAGS -g -Wall"
-fi
-
-GOBJECT_INTROSPECTION_CHECK([0.6.4])
-
-# vapigen
-have_vapigen=no
-AS_IF([test "x$found_introspection" = "xyes"],
-      [
-       dnl output of g-i >= 1.36.0 needs vapigen >= 0.20 to process
-       AC_MSG_CHECKING([whether G-I is 1.36 or newer])
-       VAPIGEN_MIN_VERSION=0.18
-       AS_IF([pkg-config --atleast-version=1.36.0 gobject-introspection-1.0],
-             [
-              AC_MSG_RESULT([yes])
-              VAPIGEN_MIN_VERSION=0.20
-             ],[AC_MSG_RESULT([no])]
-       )
-       GUPNP_PROG_VAPIGEN([$VAPIGEN_MIN_VERSION])
-      ]
-)
-AS_IF([test "x$VAPIGEN" != "x"], [have_vapigen=yes])
-AM_CONDITIONAL([HAVE_VAPIGEN], [test "x$VAPIGEN" != "x"])
-
-GTK_DOC_CHECK([1.11],[--flavour no-tmpl])
-# for fixxref
-GLIB_PREFIX="`$PKG_CONFIG --variable=prefix glib-2.0`"
-AC_SUBST(GLIB_PREFIX)
-
-dnl xmllint for schema validation
-AC_PATH_PROG([XMLLINT],[xmllint])
-AM_CONDITIONAL([HAVE_XMLLINT], [test "x$XMLLINT" != "x"])
-
-AC_CONFIG_FILES([
-Makefile
-libgupnp-dlna/Makefile
-tools/Makefile
-tests/Makefile
-data/Makefile
-gupnp-dlna-2.0.pc
-gupnp-dlna-metadata-2.0.pc
-gupnp-dlna-gst-2.0.pc
-doc/Makefile
-doc/version.xml
-doc/gupnp-dlna/Makefile
-doc/gupnp-dlna-metadata/Makefile
-doc/gupnp-dlna-gst/Makefile
-vala/Makefile
-])
-AC_CONFIG_FILES([tests/test-discoverer.sh],
-                [chmod a+x tests/test-discoverer.sh])
-AC_OUTPUT
-
-echo
-echo 'Configuration status:'
-echo
-echo "GObject-Introspection:                   $found_introspection"
-echo "VALA bindings:                           $have_vapigen"
-echo "Default metadata backend:                $with_default_metadata_backend"
-echo "Default metadata backend directory:      $with_default_metadata_backend_dir"
-echo "Build GStreamer metadata backend:        $enable_gstreamer_metadata_backend"
-echo
diff --git a/data/Makefile.am b/data/Makefile.am
deleted file mode 100644
index d7ce2bd..0000000
--- a/data/Makefile.am
+++ /dev/null
@@ -1,28 +0,0 @@
-include $(top_srcdir)/common.am
-
-dlnaschemas = dlna-profiles.rng
-dlnaprofiles = mp3.xml \
-	       ac3.xml \
-	       lpcm.xml \
-	       aac.xml \
-	       wma.xml \
-	       amr.xml \
-	       common.xml \
-	       mpeg1.xml \
-	       avc.xml \
-	       mpeg-ts.xml \
-	       mpeg-ps.xml \
-	       mpeg-common.xml \
-	       mpeg4.xml \
-	       jpeg.xml \
-	       png.xml
-
-dlnadir = $(shareddir)/dlna-profiles
-dlna_DATA = $(dlnaschemas) $(dlnaprofiles)
-
-if HAVE_XMLLINT
-check-profiles: $(dlnaprofiles) $(dlnaschemas)
-	$(XMLLINT) --relaxng $(dlnaschemas) $(dlnaprofiles) >/dev/null
-endif
-
-EXTRA_DIST = $(dlnaschemas) $(dlnaprofiles)
diff --git a/doc/Makefile.am b/doc/Makefile.am
deleted file mode 100644
index 65f1d5e..0000000
--- a/doc/Makefile.am
+++ /dev/null
@@ -1,10 +0,0 @@
-DIST_SUBDIRS = gupnp-dlna gupnp-dlna-metadata gupnp-dlna-gst .
-SUBDIRS = gupnp-dlna gupnp-dlna-metadata
-
-if GSTREAMER_METADATA_BACKEND_ENABLED
-SUBDIRS += gupnp-dlna-gst
-endif
-
-SUBDIRS += .
-
-EXTRA_DIST = version.xml.in meson.build
diff --git a/doc/gupnp-dlna-gst/Makefile.am b/doc/gupnp-dlna-gst/Makefile.am
deleted file mode 100644
index 2478e9f..0000000
--- a/doc/gupnp-dlna-gst/Makefile.am
+++ /dev/null
@@ -1,92 +0,0 @@
-## Process this file with automake to produce Makefile.in
-
-# We require automake 1.6 at least.
-AUTOMAKE_OPTIONS = 1.6
-
-# This is a blank Makefile.am for using gtk-doc.
-# Copy this to your project's API docs directory and modify the variables to
-# suit your project. See the GTK+ Makefiles in gtk+/docs/reference for examples
-# of using the various options.
-
-# The name of the module, e.g. 'glib'.
-DOC_MODULE=gupnp-dlna-gst
-
-# The top-level SGML file. You can change this if you want to.
-DOC_MAIN_SGML_FILE=$(DOC_MODULE)-docs.sgml
-
-# The directory containing the source code. Relative to $(srcdir).
-# gtk-doc will search all .c & .h files beneath here for inline comments
-# documenting the functions and macros.
-# e.g. DOC_SOURCE_DIR=../../../gtk
-DOC_SOURCE_DIR=$(srcdir)/../../libgupnp-dlna/metadata-backends/gstreamer
-
-# Extra options to pass to gtkdoc-scangobj. Not normally needed.
-SCANGOBJ_OPTIONS=
-
-# Extra options to supply to gtkdoc-scan.
-# e.g. SCAN_OPTIONS=--deprecated-guards="GTK_DISABLE_DEPRECATED"
-SCAN_OPTIONS=--deprecated-guards="GUPNP_DISABLE_DEPRECATED"
-
-# Extra options to supply to gtkdoc-mkdb.
-# e.g. MKDB_OPTIONS=--sgml-mode --output-format=xml
-MKDB_OPTIONS = \
-	--sgml-mode \
-	--output-format=xml
-
-# Extra options to supply to gtkdoc-mktmpl
-# e.g. MKTMPL_OPTIONS=--only-section-tmpl
-MKTMPL_OPTIONS=
-
-# Extra options to supply to gtkdoc-fixref. Not normally needed.
-# e.g. FIXXREF_OPTIONS=--extra-dir=../gdk-pixbuf/html --extra-dir=../gdk/html
-FIXXREF_OPTIONS = \
-	--extra-dir=$(GLIB_PREFIX)/share/gtk-doc/html/gst-plugins-base-libs-1.0 \
-	--extra-dir=../gupnp-dlna/html
-
-
-# Used for dependencies. The docs will be rebuilt if any of these change.
-# e.g. HFILE_GLOB=$(top_srcdir)/gtk/*.h
-# e.g. CFILE_GLOB=$(top_srcdir)/gtk/*.c
-HFILE_GLOB=$(top_srcdir)/libgupnp-dlna/metadata-backends/gstreamer/gupnp-dlna-gst-utils.h
-CFILE_GLOB=$(top_srcdir)/libgupnp-dlna/metadata-backends/gstreamer/gupnp-dlna-gst-utils.c
-
-# Header files to ignore when scanning.
-# e.g. IGNORE_HFILES=gtkdebug.h gtkintl.h
-IGNORE_HFILES = \
-	gupnp-dlna-gst-information.h \
-	gupnp-dlna-gst-audio-information.h \
-	gupnp-dlna-gst-container-information.h \
-	gupnp-dlna-gst-image-information.h \
-	gupnp-dlna-gst-video-information.h \
-	gupnp-dlna-gst-info-utils.h \
-	gupnp-dlna-gst-metadata-extractor.h
-# Images to copy into HTML directory.
-# e.g. HTML_IMAGES=$(top_srcdir)/gtk/stock-icons/stock_about_24.png
-HTML_IMAGES=
-
-# Extra SGML files that are included by $(DOC_MAIN_SGML_FILE).
-# e.g. content_files=running.sgml building.sgml changes-2.0.sgml
-content_files=../version.xml
-
-# SGML files where gtk-doc abbrevations (#GtkWidget) are expanded
-# These files must be listed here *and* in content_files
-# e.g. expand_content_files=running.sgml
-expand_content_files=
-
-# CFLAGS and LDFLAGS for compiling gtkdoc-scangobj with your library.
-# Only needed if you are using gtkdoc-scangobj to dynamically query widget
-# signals and properties.
-# e.g. INCLUDES=-I$(top_srcdir) -I$(top_builddir) $(GTK_DEBUG_FLAGS)
-# e.g. GTKDOC_LIBS=$(top_builddir)/gtk/$(gtktargetlib)
-GTKDOC_CFLAGS=-I$(top_srcdir)
-GTKDOC_LIBS= \
-	$(top_builddir)/libgupnp-dlna/libgupnp-dlna-2.0.la \
-	$(top_builddir)/libgupnp-dlna/metadata-backends/gstreamer/libgupnp-dlna-gst-2.0.la
-
-# This includes the standard gtk-doc make rules, copied by gtkdocize.
-include $(top_srcdir)/gtk-doc.make
-
-# Other files to distribute
-# e.g. EXTRA_DIST += version.xml.in
-EXTRA_DIST = meson.build
-DISTCLEANFILES = version.xml
diff --git a/doc/gupnp-dlna-metadata/Makefile.am b/doc/gupnp-dlna-metadata/Makefile.am
deleted file mode 100644
index 4c2bb0c..0000000
--- a/doc/gupnp-dlna-metadata/Makefile.am
+++ /dev/null
@@ -1,90 +0,0 @@
-## Process this file with automake to produce Makefile.in
-
-# We require automake 1.6 at least.
-AUTOMAKE_OPTIONS = 1.6
-
-# This is a blank Makefile.am for using gtk-doc.
-# Copy this to your project's API docs directory and modify the variables to
-# suit your project. See the GTK+ Makefiles in gtk+/docs/reference for examples
-# of using the various options.
-
-# The name of the module, e.g. 'glib'.
-DOC_MODULE=gupnp-dlna-metadata
-
-# The top-level SGML file. You can change this if you want to.
-DOC_MAIN_SGML_FILE=$(DOC_MODULE)-docs.sgml
-
-# The directory containing the source code. Relative to $(srcdir).
-# gtk-doc will search all .c & .h files beneath here for inline comments
-# documenting the functions and macros.
-# e.g. DOC_SOURCE_DIR=../../../gtk
-DOC_SOURCE_DIR=$(srcdir)/../../libgupnp-dlna/metadata
-
-# Extra options to pass to gtkdoc-scangobj. Not normally needed.
-SCANGOBJ_OPTIONS=
-
-# Extra options to supply to gtkdoc-scan.
-# e.g. SCAN_OPTIONS=--deprecated-guards="GTK_DISABLE_DEPRECATED"
-SCAN_OPTIONS=--deprecated-guards="GUPNP_DISABLE_DEPRECATED"
-
-# Extra options to supply to gtkdoc-mkdb.
-# e.g. MKDB_OPTIONS=--sgml-mode --output-format=xml
-MKDB_OPTIONS = \
-	--sgml-mode \
-	--output-format=xml
-
-# Extra options to supply to gtkdoc-mktmpl
-# e.g. MKTMPL_OPTIONS=--only-section-tmpl
-MKTMPL_OPTIONS=
-
-# Extra options to supply to gtkdoc-fixref. Not normally needed.
-# e.g. FIXXREF_OPTIONS=--extra-dir=../gdk-pixbuf/html --extra-dir=../gdk/html
-FIXXREF_OPTIONS = \
-	--extra-dir=$(GLIB_PREFIX)/share/gtk-doc/html/gobject \
-	--extra-dir=$(GLIB_PREFIX)/share/gtk-doc/html/glib \
-	--extra-dir=$(GLIB_PREFIX)/share/gtk-doc/html/gmodule \
-	--extra-dir=../gupnp-dlna/html
-
-
-# Used for dependencies. The docs will be rebuilt if any of these change.
-# e.g. HFILE_GLOB=$(top_srcdir)/gtk/*.h
-# e.g. CFILE_GLOB=$(top_srcdir)/gtk/*.c
-HFILE_GLOB = \
-	$(top_srcdir)/libgupnp-dlna/*.h \
-	$(top_srcdir)/libgupnp-dlna/metadata/*.h
-CFILE_GLOB = \
-	$(top_srcdir)/libgupnp-dlna/*.c \
-	$(top_srcdir)/libgupnp-dlna/metadata/*.c
-
-# Header files to ignore when scanning.
-# e.g. IGNORE_HFILES=gtkdebug.h gtkintl.h
-IGNORE_HFILES =
-
-# Images to copy into HTML directory.
-# e.g. HTML_IMAGES=$(top_srcdir)/gtk/stock-icons/stock_about_24.png
-HTML_IMAGES=
-
-# Extra SGML files that are included by $(DOC_MAIN_SGML_FILE).
-# e.g. content_files=running.sgml building.sgml changes-2.0.sgml
-content_files=../version.xml
-
-# SGML files where gtk-doc abbrevations (#GtkWidget) are expanded
-# These files must be listed here *and* in content_files
-# e.g. expand_content_files=running.sgml
-expand_content_files=
-
-# CFLAGS and LDFLAGS for compiling gtkdoc-scangobj with your library.
-# Only needed if you are using gtkdoc-scangobj to dynamically query widget
-# signals and properties.
-# e.g. INCLUDES=-I$(top_srcdir) -I$(top_builddir) $(GTK_DEBUG_FLAGS)
-# e.g. GTKDOC_LIBS=$(top_builddir)/gtk/$(gtktargetlib)
-GTKDOC_CFLAGS=-I$(top_srcdir)
-GTKDOC_LIBS=$(top_builddir)/libgupnp-dlna/libgupnp-dlna-2.0.la
-
-# This includes the standard gtk-doc make rules, copied by gtkdocize.
-include $(top_srcdir)/gtk-doc.make
-
-# Other files to distribute
-# e.g. EXTRA_DIST += version.xml.in
-EXTRA_DIST = meson.build
-DISTCLEANFILES = version.xml
diff --git a/doc/gupnp-dlna/Makefile.am b/doc/gupnp-dlna/Makefile.am
deleted file mode 100644
index 895e4fc..0000000
--- a/doc/gupnp-dlna/Makefile.am
+++ /dev/null
@@ -1,102 +0,0 @@
-## Process this file with automake to produce Makefile.in
-
-# We require automake 1.6 at least.
-AUTOMAKE_OPTIONS = 1.6
-
-# This is a blank Makefile.am for using gtk-doc.
-# Copy this to your project's API docs directory and modify the variables to
-# suit your project. See the GTK+ Makefiles in gtk+/docs/reference for examples
-# of using the various options.
-
-# The name of the module, e.g. 'glib'.
-DOC_MODULE=gupnp-dlna
-
-# The top-level SGML file. You can change this if you want to.
-DOC_MAIN_SGML_FILE=$(DOC_MODULE)-docs.sgml
-
-# The directory containing the source code. Relative to $(srcdir).
-# gtk-doc will search all .c & .h files beneath here for inline comments
-# documenting the functions and macros.
-# e.g. DOC_SOURCE_DIR=../../../gtk
-DOC_SOURCE_DIR=$(srcdir)/../../libgupnp-dlna
-
-# Extra options to pass to gtkdoc-scangobj. Not normally needed.
-SCANGOBJ_OPTIONS=
-
-# Extra options to supply to gtkdoc-scan.
-# e.g. SCAN_OPTIONS=--deprecated-guards="GTK_DISABLE_DEPRECATED"
-SCAN_OPTIONS=--deprecated-guards="GUPNP_DISABLE_DEPRECATED"
-
-# Extra options to supply to gtkdoc-mkdb.
-# e.g. MKDB_OPTIONS=--sgml-mode --output-format=xml
-MKDB_OPTIONS = \
-	--sgml-mode \
-	--output-format=xml \
-	--ignore-files="metadata metadata-backends"
-
-# Extra options to supply to gtkdoc-mktmpl
-# e.g. MKTMPL_OPTIONS=--only-section-tmpl
-MKTMPL_OPTIONS=
-
-# Extra options to supply to gtkdoc-fixref. Not normally needed.
-# e.g. FIXXREF_OPTIONS=--extra-dir=../gdk-pixbuf/html --extra-dir=../gdk/html
-FIXXREF_OPTIONS = \
-	--extra-dir=$(GLIB_PREFIX)/share/gtk-doc/html/gobject \
-	--extra-dir=$(GLIB_PREFIX)/share/gtk-doc/html/glib \
-	--extra-dir=$(GLIB_PREFIX)/share/gtk-doc/html/gmodule
-
-
-# Used for dependencies. The docs will be rebuilt if any of these change.
-# e.g. HFILE_GLOB=$(top_srcdir)/gtk/*.h
-# e.g. CFILE_GLOB=$(top_srcdir)/gtk/*.c
-HFILE_GLOB=$(top_srcdir)/libgupnp-dlna/*.h
-CFILE_GLOB=$(top_srcdir)/libgupnp-dlna/*.c
-
-# Header files to ignore when scanning.
-# e.g. IGNORE_HFILES=gtkdebug.h gtkintl.h
-IGNORE_HFILES = \
-	metadata \
-	metadata-backends \
-	gupnp-dlna-field-value.h \
-	gupnp-dlna-metadata-backend.h \
-	gupnp-dlna-profile-guesser-impl.h \
-	gupnp-dlna-profile-loader.h \
-	gupnp-dlna-g-values-private.h \
-	gupnp-dlna-info-set.h \
-	gupnp-dlna-info-value.h \
-	gupnp-dlna-profile-private.h \
-	gupnp-dlna-restriction-private.h \
-	gupnp-dlna-utils.h \
-	gupnp-dlna-value.h \
-	gupnp-dlna-value-list-private.h \
-	gupnp-dlna-value-type.h \
-	gupnp-dlna-value-union.h
-
-# Images to copy into HTML directory.
-# e.g. HTML_IMAGES=$(top_srcdir)/gtk/stock-icons/stock_about_24.png
-HTML_IMAGES=
-
-# Extra SGML files that are included by $(DOC_MAIN_SGML_FILE).
-# e.g. content_files=running.sgml building.sgml changes-2.0.sgml
-content_files=../version.xml
-
-# SGML files where gtk-doc abbrevations (#GtkWidget) are expanded
-# These files must be listed here *and* in content_files
-# e.g. expand_content_files=running.sgml
-expand_content_files=
-
-# CFLAGS and LDFLAGS for compiling gtkdoc-scangobj with your library.
-# Only needed if you are using gtkdoc-scangobj to dynamically query widget
-# signals and properties.
-# e.g. INCLUDES=-I$(top_srcdir) -I$(top_builddir) $(GTK_DEBUG_FLAGS)
-# e.g. GTKDOC_LIBS=$(top_builddir)/gtk/$(gtktargetlib)
-GTKDOC_FLAGS=-I$(top_srcdir)
-GTKDOC_LIBS=$(top_builddir)/libgupnp-dlna/libgupnp-dlna-2.0.la
-
-# This includes the standard gtk-doc make rules, copied by gtkdocize.
-include $(top_srcdir)/gtk-doc.make
-
-# Other files to distribute
-# e.g. EXTRA_DIST += version.xml.in
-EXTRA_DIST = meson.build
-DISTCLEANFILES = version.xml
diff --git a/gupnp-dlna-2.0.pc.in b/gupnp-dlna-2.0.pc.in
deleted file mode 100644
index f6d3002..0000000
--- a/gupnp-dlna-2.0.pc.in
+++ /dev/null
@@ -1,12 +0,0 @@
-prefix=@prefix@
-exec_prefix=@exec_prefix@
-libdir=@libdir@
-includedir=@includedir@
-
-Name: gupnp-dlna-2.0
-Description: GObject-based DLNA specific UPnP library
-Version: @VERSION@
-Libs: -L${libdir} -lgupnp-dlna-2.0
-Cflags: -I${includedir}/gupnp-dlna-2.0
-Requires: glib-2.0 gobject-2.0
-Requires.private: gmodule-2.0
diff --git a/gupnp-dlna-gst-2.0.pc.in b/gupnp-dlna-gst-2.0.pc.in
deleted file mode 100644
index 90a3a60..0000000
--- a/gupnp-dlna-gst-2.0.pc.in
+++ /dev/null
@@ -1,10 +0,0 @@
-prefix=@prefix@
-exec_prefix=@exec_prefix@
-libdir=@libdir@
-includedir=@includedir@
-
-Name: gupnp-dlna-gst-2.0
-Description: GStreamer specific utils using GUPnP-DLNA
-Version: @VERSION@
-Libs: -L${libdir} -lgupnp-dlna-gst-2.0
-Requires: glib-2.0 gobject-2.0 gupnp-dlna-2.0 gstreamer-@GST_MAJORMINOR@ gstreamer-pbutils-@GST_MAJORMINOR@
diff --git a/gupnp-dlna-metadata-2.0.pc.in b/gupnp-dlna-metadata-2.0.pc.in
deleted file mode 100644
index cd6fb4f..0000000
--- a/gupnp-dlna-metadata-2.0.pc.in
+++ /dev/null
@@ -1,11 +0,0 @@
-prefix=@prefix@
-exec_prefix=@exec_prefix@
-libdir=@libdir@
-includedir=@includedir@
-plugindir=@METADATA_DIRECTORY@
-
-Name: gupnp-dlna-metadata-2.0
-Description: Metadata extractor plugin development files for GUPnP-DLNA
-Version: @VERSION@
-Cflags: -I${includedir}/gupnp-dlna-2.0/metadata
-Requires: glib-2.0 gobject-2.0 gupnp-dlna-2.0
diff --git a/libgupnp-dlna/metadata-backends/gstreamer/gstreamer.am b/libgupnp-dlna/metadata-backends/gstreamer/gstreamer.am
deleted file mode 100644
index 6eefb5e..0000000
--- a/libgupnp-dlna/metadata-backends/gstreamer/gstreamer.am
+++ /dev/null
@@ -1,59 +0,0 @@
-gst_metadata_backend_libadd = \
-	$(common_libadd) \
-	$(GST_LIBS) \
-	$(GST_PBU_LIBS) \
-	libgupnp-dlna-2.0.la
-gst_metadata_backend_cflags = \
-	$(common_cflags) \
-	$(GST_CFLAGS) \
-	$(GST_PBU_CFLAGS) \
-	$(metadata_log_cflags) \
-	$(metadata_cflags)
-
-gstreamer_metadata_backend = \
-	metadata-backends/gstreamer/libgstreamer.la
-gstreamer_utils_lib = \
-	metadata-backends/gstreamer/libgupnp-dlna-gst-2.0.la
-metadata_LTLIBRARIES += \
-	$(gstreamer_metadata_backend)
-lib_LTLIBRARIES += \
-	$(gstreamer_utils_lib)
-
-metadata_backends_gstreamer_libgstreamer_la_LDFLAGS = \
-	-no-undefined \
-	-shared -fPIC -module -avoid-version -Wl,-z,defs
-metadata_backends_gstreamer_libgstreamer_la_SOURCES = \
-	metadata-backends/gstreamer/gupnp-dlna-gst-metadata-backend.c \
-	metadata-backends/gstreamer/gupnp-dlna-gst-metadata-extractor.c
-metadata_backends_gstreamer_libgstreamer_la_LIBADD = \
-	$(gst_metadata_backend_libadd) \
-	$(gstreamer_utils_lib)
-metadata_backends_gstreamer_libgstreamer_la_CFLAGS = \
-	$(gst_metadata_backend_cflags)
-
-metadata_backends_gstreamer_libgupnp_dlna_gst_2_0_la_LDFLAGS = \
-	$(gupnp_ldflags)
-metadata_backends_gstreamer_libgupnp_dlna_gst_2_0_la_SOURCES = \
-	metadata-backends/gstreamer/gupnp-dlna-gst-audio-information.c \
-	metadata-backends/gstreamer/gupnp-dlna-gst-container-information.c \
-	metadata-backends/gstreamer/gupnp-dlna-gst-image-information.c \
-	metadata-backends/gstreamer/gupnp-dlna-gst-information.c \
-	metadata-backends/gstreamer/gupnp-dlna-gst-info-utils.c \
-	metadata-backends/gstreamer/gupnp-dlna-gst-utils.c \
-	metadata-backends/gstreamer/gupnp-dlna-gst-video-information.c
-metadata_backends_gstreamer_libgupnp_dlna_gst_2_0_la_LIBADD = \
-	$(gst_metadata_backend_libadd)
-metadata_backends_gstreamer_libgupnp_dlna_gst_2_0_la_CFLAGS = \
-	$(gst_metadata_backend_cflags)
-
-dist_noinst_HEADERS += \
-	metadata-backends/gstreamer/gupnp-dlna-gst-audio-information.h \
-	metadata-backends/gstreamer/gupnp-dlna-gst-container-information.h \
-	metadata-backends/gstreamer/gupnp-dlna-gst-image-information.h \
-	metadata-backends/gstreamer/gupnp-dlna-gst-information.h \
-	metadata-backends/gstreamer/gupnp-dlna-gst-info-utils.h \
-	metadata-backends/gstreamer/gupnp-dlna-gst-metadata-extractor.h \
-	metadata-backends/gstreamer/gupnp-dlna-gst-video-information.h
-
-libgupnp_dlna_inc_HEADERS += \
-	metadata-backends/gstreamer/gupnp-dlna-gst-utils.h
diff --git a/libgupnp-dlna/metadata/metadata.am b/libgupnp-dlna/metadata/metadata.am
deleted file mode 100644
index c0abb3b..0000000
--- a/libgupnp-dlna/metadata/metadata.am
+++ /dev/null
@@ -1,2 +0,0 @@
-metadata_metadata_sources = \
-	metadata/gupnp-dlna-metadata-extractor.c
diff --git a/m4/ax_append_compile_flags.m4 b/m4/ax_append_compile_flags.m4
deleted file mode 100644
index dc7b866..0000000
--- a/m4/ax_append_compile_flags.m4
+++ /dev/null
@@ -1,65 +0,0 @@
-# ===========================================================================
-#  http://www.gnu.org/software/autoconf-archive/ax_append_compile_flags.html
-# ===========================================================================
-#
-# SYNOPSIS
-#
-#   AX_APPEND_COMPILE_FLAGS([FLAG1 FLAG2 ...], [FLAGS-VARIABLE], [EXTRA-FLAGS])
-#
-# DESCRIPTION
-#
-#   For every FLAG1, FLAG2 it is checked whether the compiler works with the
-#   flag.  If it does, the flag is added FLAGS-VARIABLE
-#
-#   If FLAGS-VARIABLE is not specified, the current language's flags (e.g.
-#   CFLAGS) is used.  During the check the flag is always added to the
-#   current language's flags.
-#
-#   If EXTRA-FLAGS is defined, it is added to the current language's default
-#   flags (e.g. CFLAGS) when the check is done.  The check is thus made with
-#   the flags: "CFLAGS EXTRA-FLAGS FLAG".  This can for example be used to
-#   force the compiler to issue an error when a bad flag is given.
-#
-#   NOTE: This macro depends on the AX_APPEND_FLAG and
-#   AX_CHECK_COMPILE_FLAG. Please keep this macro in sync with
-#   AX_APPEND_LINK_FLAGS.
-#
-# LICENSE
-#
-#   Copyright (c) 2011 Maarten Bosmans <mkbosmans@gmail.com>
-#
-#   This program is free software: you can redistribute it and/or modify it
-#   under the terms of the GNU General Public License as published by the
-#   Free Software Foundation, either version 3 of the License, or (at your
-#   option) any later version.
-#
-#   This program is distributed in the hope that it will be useful, but
-#   WITHOUT ANY WARRANTY; without even the implied warranty of
-#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
-#   Public License for more details.
-#
-#   You should have received a copy of the GNU General Public License along
-#   with this program. If not, see <http://www.gnu.org/licenses/>.
-#
-#   As a special exception, the respective Autoconf Macro's copyright owner
-#   gives unlimited permission to copy, distribute and modify the configure
-#   scripts that are the output of Autoconf when processing the Macro. You
-#   need not follow the terms of the GNU General Public License when using
-#   or distributing such scripts, even though portions of the text of the
-#   Macro appear in them. The GNU General Public License (GPL) does govern
-#   all other use of the material that constitutes the Autoconf Macro.
-#
-#   This special exception to the GPL applies to versions of the Autoconf
-#   Macro released by the Autoconf Archive. When you make and distribute a
-#   modified version of the Autoconf Macro, you may extend this special
-#   exception to the GPL to apply to your modified version as well.
-
-#serial 4
-
-AC_DEFUN([AX_APPEND_COMPILE_FLAGS],
-[AX_REQUIRE_DEFINED([AX_CHECK_COMPILE_FLAG])
-AX_REQUIRE_DEFINED([AX_APPEND_FLAG])
-for flag in $1; do
-  AX_CHECK_COMPILE_FLAG([$flag], [AX_APPEND_FLAG([$flag], [$2])], [], [$3])
-done
-])dnl AX_APPEND_COMPILE_FLAGS
diff --git a/m4/ax_append_flag.m4 b/m4/ax_append_flag.m4
deleted file mode 100644
index aeab899..0000000
--- a/m4/ax_append_flag.m4
+++ /dev/null
@@ -1,71 +0,0 @@
-# ===========================================================================
-#      http://www.gnu.org/software/autoconf-archive/ax_append_flag.html
-# ===========================================================================
-#
-# SYNOPSIS
-#
-#   AX_APPEND_FLAG(FLAG, [FLAGS-VARIABLE])
-#
-# DESCRIPTION
-#
-#   FLAG is appended to the FLAGS-VARIABLE shell variable, with a space
-#   added in between.
-#
-#   If FLAGS-VARIABLE is not specified, the current language's flags (e.g.
-#   CFLAGS) is used.  FLAGS-VARIABLE is not changed if it already contains
-#   FLAG.  If FLAGS-VARIABLE is unset in the shell, it is set to exactly
-#   FLAG.
-#
-#   NOTE: Implementation based on AX_CFLAGS_GCC_OPTION.
-#
-# LICENSE
-#
-#   Copyright (c) 2008 Guido U. Draheim <guidod@gmx.de>
-#   Copyright (c) 2011 Maarten Bosmans <mkbosmans@gmail.com>
-#
-#   This program is free software: you can redistribute it and/or modify it
-#   under the terms of the GNU General Public License as published by the
-#   Free Software Foundation, either version 3 of the License, or (at your
-#   option) any later version.
-#
-#   This program is distributed in the hope that it will be useful, but
-#   WITHOUT ANY WARRANTY; without even the implied warranty of
-#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
-#   Public License for more details.
-#
-#   You should have received a copy of the GNU General Public License along
-#   with this program. If not, see <http://www.gnu.org/licenses/>.
-#
-#   As a special exception, the respective Autoconf Macro's copyright owner
-#   gives unlimited permission to copy, distribute and modify the configure
-#   scripts that are the output of Autoconf when processing the Macro. You
-#   need not follow the terms of the GNU General Public License when using
-#   or distributing such scripts, even though portions of the text of the
-#   Macro appear in them. The GNU General Public License (GPL) does govern
-#   all other use of the material that constitutes the Autoconf Macro.
-#
-#   This special exception to the GPL applies to versions of the Autoconf
-#   Macro released by the Autoconf Archive. When you make and distribute a
-#   modified version of the Autoconf Macro, you may extend this special
-#   exception to the GPL to apply to your modified version as well.
-
-#serial 5
-
-AC_DEFUN([AX_APPEND_FLAG],
-[dnl
-AC_PREREQ(2.64)dnl for _AC_LANG_PREFIX and AS_VAR_SET_IF
-AS_VAR_PUSHDEF([FLAGS], [m4_default($2,_AC_LANG_PREFIX[FLAGS])])
-AS_VAR_SET_IF(FLAGS,[
-  AS_CASE([" AS_VAR_GET(FLAGS) "],
-    [*" $1 "*], [AC_RUN_LOG([: FLAGS already contains $1])],
-    [
-     AS_VAR_APPEND(FLAGS," $1")
-     AC_RUN_LOG([: FLAGS="$FLAGS"])
-    ])
-  ],
-  [
-  AS_VAR_SET(FLAGS,[$1])
-  AC_RUN_LOG([: FLAGS="$FLAGS"])
-  ])
-AS_VAR_POPDEF([FLAGS])dnl
-])dnl AX_APPEND_FLAG
diff --git a/m4/ax_check_compile_flag.m4 b/m4/ax_check_compile_flag.m4
deleted file mode 100644
index ca36397..0000000
--- a/m4/ax_check_compile_flag.m4
+++ /dev/null
@@ -1,74 +0,0 @@
-# ===========================================================================
-#   http://www.gnu.org/software/autoconf-archive/ax_check_compile_flag.html
-# ===========================================================================
-#
-# SYNOPSIS
-#
-#   AX_CHECK_COMPILE_FLAG(FLAG, [ACTION-SUCCESS], [ACTION-FAILURE], [EXTRA-FLAGS], [INPUT])
-#
-# DESCRIPTION
-#
-#   Check whether the given FLAG works with the current language's compiler
-#   or gives an error.  (Warnings, however, are ignored)
-#
-#   ACTION-SUCCESS/ACTION-FAILURE are shell commands to execute on
-#   success/failure.
-#
-#   If EXTRA-FLAGS is defined, it is added to the current language's default
-#   flags (e.g. CFLAGS) when the check is done.  The check is thus made with
-#   the flags: "CFLAGS EXTRA-FLAGS FLAG".  This can for example be used to
-#   force the compiler to issue an error when a bad flag is given.
-#
-#   INPUT gives an alternative input source to AC_COMPILE_IFELSE.
-#
-#   NOTE: Implementation based on AX_CFLAGS_GCC_OPTION. Please keep this
-#   macro in sync with AX_CHECK_{PREPROC,LINK}_FLAG.
-#
-# LICENSE
-#
-#   Copyright (c) 2008 Guido U. Draheim <guidod@gmx.de>
-#   Copyright (c) 2011 Maarten Bosmans <mkbosmans@gmail.com>
-#
-#   This program is free software: you can redistribute it and/or modify it
-#   under the terms of the GNU General Public License as published by the
-#   Free Software Foundation, either version 3 of the License, or (at your
-#   option) any later version.
-#
-#   This program is distributed in the hope that it will be useful, but
-#   WITHOUT ANY WARRANTY; without even the implied warranty of
-#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
-#   Public License for more details.
-#
-#   You should have received a copy of the GNU General Public License along
-#   with this program. If not, see <http://www.gnu.org/licenses/>.
-#
-#   As a special exception, the respective Autoconf Macro's copyright owner
-#   gives unlimited permission to copy, distribute and modify the configure
-#   scripts that are the output of Autoconf when processing the Macro. You
-#   need not follow the terms of the GNU General Public License when using
-#   or distributing such scripts, even though portions of the text of the
-#   Macro appear in them. The GNU General Public License (GPL) does govern
-#   all other use of the material that constitutes the Autoconf Macro.
-#
-#   This special exception to the GPL applies to versions of the Autoconf
-#   Macro released by the Autoconf Archive. When you make and distribute a
-#   modified version of the Autoconf Macro, you may extend this special
-#   exception to the GPL to apply to your modified version as well.
-
-#serial 4
-
-AC_DEFUN([AX_CHECK_COMPILE_FLAG],
-[AC_PREREQ(2.64)dnl for _AC_LANG_PREFIX and AS_VAR_IF
-AS_VAR_PUSHDEF([CACHEVAR],[ax_cv_check_[]_AC_LANG_ABBREV[]flags_$4_$1])dnl
-AC_CACHE_CHECK([whether _AC_LANG compiler accepts $1], CACHEVAR, [
-  ax_check_save_flags=$[]_AC_LANG_PREFIX[]FLAGS
-  _AC_LANG_PREFIX[]FLAGS="$[]_AC_LANG_PREFIX[]FLAGS $4 $1"
-  AC_COMPILE_IFELSE([m4_default([$5],[AC_LANG_PROGRAM()])],
-    [AS_VAR_SET(CACHEVAR,[yes])],
-    [AS_VAR_SET(CACHEVAR,[no])])
-  _AC_LANG_PREFIX[]FLAGS=$ax_check_save_flags])
-AS_VAR_IF(CACHEVAR,yes,
-  [m4_default([$2], :)],
-  [m4_default([$3], :)])
-AS_VAR_POPDEF([CACHEVAR])dnl
-])dnl AX_CHECK_COMPILE_FLAGS
diff --git a/m4/ax_compiler_flags.m4 b/m4/ax_compiler_flags.m4
deleted file mode 100644
index 6cfe398..0000000
--- a/m4/ax_compiler_flags.m4
+++ /dev/null
@@ -1,158 +0,0 @@
-# ===========================================================================
-#     http://www.gnu.org/software/autoconf-archive/ax_compiler_flags.html
-# ===========================================================================
-#
-# SYNOPSIS
-#
-#   AX_COMPILER_FLAGS([CFLAGS-VARIABLE], [LDFLAGS-VARIABLE], [IS-RELEASE], [EXTRA-BASE-CFLAGS], [EXTRA-YES-CFLAGS], [UNUSED], [UNUSED], [UNUSED], [EXTRA-BASE-LDFLAGS], [EXTRA-YES-LDFLAGS], [UNUSED], [UNUSED], [UNUSED])
-#
-# DESCRIPTION
-#
-#   Check for the presence of an --enable-compile-warnings option to
-#   configure, defaulting to "error" in normal operation, or "yes" if
-#   IS-RELEASE is equal to "yes".  Return the value in the variable
-#   $ax_enable_compile_warnings.
-#
-#   Depending on the value of --enable-compile-warnings, different compiler
-#   warnings are checked to see if they work with the current compiler and,
-#   if so, are appended to CFLAGS-VARIABLE and LDFLAGS-VARIABLE.  This
-#   allows a consistent set of baseline compiler warnings to be used across
-#   a code base, irrespective of any warnings enabled locally by individual
-#   developers.  By standardising the warnings used by all developers of a
-#   project, the project can commit to a zero-warnings policy, using -Werror
-#   to prevent compilation if new warnings are introduced.  This makes
-#   catching bugs which are flagged by warnings a lot easier.
-#
-#   By providing a consistent --enable-compile-warnings argument across all
-#   projects using this macro, continuous integration systems can easily be
-#   configured the same for all projects.  Automated systems or build
-#   systems aimed at beginners may want to pass the --disable-Werror
-#   argument to unconditionally prevent warnings being fatal.
-#
-#   --enable-compile-warnings can take the values:
-#
-#    * no:      Base compiler warnings only; not even -Wall.
-#    * yes:     The above, plus a broad range of useful warnings.
-#    * error:   The above, plus -Werror so that all warnings are fatal.
-#               Use --disable-Werror to override this and disable fatal
-#               warnings.
-#
-#   The set of base and enabled flags can be augmented using the
-#   EXTRA-*-CFLAGS and EXTRA-*-LDFLAGS variables, which are tested and
-#   appended to the output variable if --enable-compile-warnings is not
-#   "no". Flags should not be disabled using these arguments, as the entire
-#   point of AX_COMPILER_FLAGS is to enforce a consistent set of useful
-#   compiler warnings on code, using warnings which have been chosen for low
-#   false positive rates.  If a compiler emits false positives for a
-#   warning, a #pragma should be used in the code to disable the warning
-#   locally. See:
-#
-#     https://gcc.gnu.org/onlinedocs/gcc-4.9.2/gcc/Diagnostic-Pragmas.html#Diagnostic-Pragmas
-#
-#   The EXTRA-* variables should only be used to supply extra warning flags,
-#   and not general purpose compiler flags, as they are controlled by
-#   configure options such as --disable-Werror.
-#
-#   IS-RELEASE can be used to disable -Werror when making a release, which
-#   is useful for those hairy moments when you just want to get the release
-#   done as quickly as possible.  Set it to "yes" to disable -Werror. By
-#   default, it uses the value of $ax_is_release, so if you are using the
-#   AX_IS_RELEASE macro, there is no need to pass this parameter. For
-#   example:
-#
-#     AX_IS_RELEASE([git-directory])
-#     AX_COMPILER_FLAGS()
-#
-#   CFLAGS-VARIABLE defaults to WARN_CFLAGS, and LDFLAGS-VARIABLE defaults
-#   to WARN_LDFLAGS.  Both variables are AC_SUBST-ed by this macro, but must
-#   be manually added to the CFLAGS and LDFLAGS variables for each target in
-#   the code base.
-#
-#   If C++ language support is enabled with AC_PROG_CXX, which must occur
-#   before this macro in configure.ac, warning flags for the C++ compiler
-#   are AC_SUBST-ed as WARN_CXXFLAGS, and must be manually added to the
-#   CXXFLAGS variables for each target in the code base.  EXTRA-*-CFLAGS can
-#   be used to augment the base and enabled flags.
-#
-#   Warning flags for g-ir-scanner (from GObject Introspection) are
-#   AC_SUBST-ed as WARN_SCANNERFLAGS.  This variable must be manually added
-#   to the SCANNERFLAGS variable for each GIR target in the code base.  If
-#   extra g-ir-scanner flags need to be enabled, the AX_COMPILER_FLAGS_GIR
-#   macro must be invoked manually.
-#
-#   AX_COMPILER_FLAGS may add support for other tools in future, in addition
-#   to the compiler and linker.  No extra EXTRA-* variables will be added
-#   for those tools, and all extra support will still use the single
-#   --enable-compile-warnings configure option.  For finer grained control
-#   over the flags for individual tools, use AX_COMPILER_FLAGS_CFLAGS,
-#   AX_COMPILER_FLAGS_LDFLAGS and AX_COMPILER_FLAGS_* for new tools.
-#
-#   The UNUSED variables date from a previous version of this macro, and are
-#   automatically appended to the preceding non-UNUSED variable. They should
-#   be left empty in new uses of the macro.
-#
-# LICENSE
-#
-#   Copyright (c) 2014, 2015 Philip Withnall <philip@tecnocode.co.uk>
-#   Copyright (c) 2015 David King <amigadave@amigadave.com>
-#
-#   Copying and distribution of this file, with or without modification, are
-#   permitted in any medium without royalty provided the copyright notice
-#   and this notice are preserved.  This file is offered as-is, without any
-#   warranty.
-
-#serial 13
-
-# _AX_COMPILER_FLAGS_LANG([LANGNAME])
-m4_defun([_AX_COMPILER_FLAGS_LANG],
-[m4_ifdef([_AX_COMPILER_FLAGS_LANG_]$1[_enabled], [],
-          [m4_define([_AX_COMPILER_FLAGS_LANG_]$1[_enabled], [])dnl
-           AX_REQUIRE_DEFINED([AX_COMPILER_FLAGS_]$1[FLAGS])])dnl
-])
-
-AC_DEFUN([AX_COMPILER_FLAGS],[
-    # C support is enabled by default.
-    _AX_COMPILER_FLAGS_LANG([C])
-    # Only enable C++ support if AC_PROG_CXX is called. The redefinition of
-    # AC_PROG_CXX is so that a fatal error is emitted if this macro is called
-    # before AC_PROG_CXX, which would otherwise cause no C++ warnings to be
-    # checked.
-    AC_PROVIDE_IFELSE([AC_PROG_CXX],
-                      [_AX_COMPILER_FLAGS_LANG([CXX])],
-                      [m4_define([AC_PROG_CXX], defn([AC_PROG_CXX])[_AX_COMPILER_FLAGS_LANG([CXX])])])
-    AX_REQUIRE_DEFINED([AX_COMPILER_FLAGS_LDFLAGS])
-
-    # Default value for IS-RELEASE is $ax_is_release
-    ax_compiler_flags_is_release=m4_tolower(m4_normalize(ifelse([$3],,
-                                                                [$ax_is_release],
-                                                                [$3])))
-
-    AC_ARG_ENABLE([compile-warnings],
-                  AS_HELP_STRING([--enable-compile-warnings=@<:@no/yes/error@:>@],
-                                 [Enable compiler warnings and errors]),,
-                  [AS_IF([test "$ax_compiler_flags_is_release" = "yes"],
-                         [enable_compile_warnings="yes"],
-                         [enable_compile_warnings="error"])])
-    AC_ARG_ENABLE([Werror],
-                  AS_HELP_STRING([--disable-Werror],
-                                 [Unconditionally make all compiler warnings non-fatal]),,
-                  [enable_Werror=maybe])
-
-    # Return the user's chosen warning level
-    AS_IF([test "$enable_Werror" = "no" -a \
-                "$enable_compile_warnings" = "error"],[
-        enable_compile_warnings="yes"
-    ])
-
-    ax_enable_compile_warnings=$enable_compile_warnings
-
-    AX_COMPILER_FLAGS_CFLAGS([$1],[$ax_compiler_flags_is_release],
-                             [$4],[$5 $6 $7 $8])
-    m4_ifdef([_AX_COMPILER_FLAGS_LANG_CXX_enabled],
-             [AX_COMPILER_FLAGS_CXXFLAGS([WARN_CXXFLAGS],
-                                         [$ax_compiler_flags_is_release],
-                                         [$4],[$5 $6 $7 $8])])
-    AX_COMPILER_FLAGS_LDFLAGS([$2],[$ax_compiler_flags_is_release],
-                              [$9],[$10 $11 $12 $13])
-    AX_COMPILER_FLAGS_GIR([WARN_SCANNERFLAGS],[$ax_compiler_flags_is_release])
-])dnl AX_COMPILER_FLAGS
diff --git a/m4/ax_compiler_flags_cflags.m4 b/m4/ax_compiler_flags_cflags.m4
deleted file mode 100644
index cffc5e6..0000000
--- a/m4/ax_compiler_flags_cflags.m4
+++ /dev/null
@@ -1,132 +0,0 @@
-# ============================================================================
-#  http://www.gnu.org/software/autoconf-archive/ax_compiler_flags_cflags.html
-# ============================================================================
-#
-# SYNOPSIS
-#
-#   AX_COMPILER_FLAGS_CFLAGS([VARIABLE], [IS-RELEASE], [EXTRA-BASE-FLAGS], [EXTRA-YES-FLAGS])
-#
-# DESCRIPTION
-#
-#   Add warning flags for the C compiler to VARIABLE, which defaults to
-#   WARN_CFLAGS.  VARIABLE is AC_SUBST-ed by this macro, but must be
-#   manually added to the CFLAGS variable for each target in the code base.
-#
-#   This macro depends on the environment set up by AX_COMPILER_FLAGS.
-#   Specifically, it uses the value of $ax_enable_compile_warnings to decide
-#   which flags to enable.
-#
-# LICENSE
-#
-#   Copyright (c) 2014, 2015 Philip Withnall <philip@tecnocode.co.uk>
-#
-#   Copying and distribution of this file, with or without modification, are
-#   permitted in any medium without royalty provided the copyright notice
-#   and this notice are preserved.  This file is offered as-is, without any
-#   warranty.
-
-#serial 11
-
-AC_DEFUN([AX_COMPILER_FLAGS_CFLAGS],[
-    AC_REQUIRE([AC_PROG_SED])
-    AX_REQUIRE_DEFINED([AX_APPEND_COMPILE_FLAGS])
-    AX_REQUIRE_DEFINED([AX_APPEND_FLAG])
-    AX_REQUIRE_DEFINED([AX_CHECK_COMPILE_FLAG])
-
-    # Variable names
-    m4_define(ax_warn_cflags_variable,
-              [m4_normalize(ifelse([$1],,[WARN_CFLAGS],[$1]))])
-
-    AC_LANG_PUSH([C])
-
-    # Always pass -Werror=unknown-warning-option to get Clang to fail on bad
-    # flags, otherwise they are always appended to the warn_cflags variable, and
-    # Clang warns on them for every compilation unit.
-    # If this is passed to GCC, it will explode, so the flag must be enabled
-    # conditionally.
-    AX_CHECK_COMPILE_FLAG([-Werror=unknown-warning-option],[
-        ax_compiler_flags_test="-Werror=unknown-warning-option"
-    ],[
-        ax_compiler_flags_test=""
-    ])
-
-    # Base flags
-    AX_APPEND_COMPILE_FLAGS([ dnl
-        -fno-strict-aliasing dnl
-        $3 dnl
-    ],ax_warn_cflags_variable,[$ax_compiler_flags_test])
-
-    AS_IF([test "$ax_enable_compile_warnings" != "no"],[
-        # "yes" flags
-        AX_APPEND_COMPILE_FLAGS([ dnl
-            -Wall dnl
-            -Wextra dnl
-            -Wundef dnl
-            -Wnested-externs dnl
-            -Wwrite-strings dnl
-            -Wpointer-arith dnl
-            -Wmissing-declarations dnl
-            -Wmissing-prototypes dnl
-            -Wstrict-prototypes dnl
-            -Wredundant-decls dnl
-            -Wno-unused-parameter dnl
-            -Wno-missing-field-initializers dnl
-            -Wformat=2 dnl
-            -Wold-style-definition dnl
-            -Wcast-align dnl
-            -Wformat-nonliteral dnl
-            -Wformat-security dnl
-            -Wsign-compare dnl
-            -Wstrict-aliasing dnl
-            -Wshadow dnl
-            -Winline dnl
-            -Wpacked dnl
-            -Wmissing-format-attribute dnl
-            -Wmissing-noreturn dnl
-            -Winit-self dnl
-            -Wredundant-decls dnl
-            -Wmissing-include-dirs dnl
-            -Wunused-but-set-variable dnl
-            -Warray-bounds dnl
-            -Wimplicit-function-declaration dnl
-            -Wreturn-type dnl
-            -Wswitch-enum dnl
-            -Wswitch-default dnl
-            $4 dnl
-            $5 dnl
-            $6 dnl
-            $7 dnl
-        ],ax_warn_cflags_variable,[$ax_compiler_flags_test])
-    ])
-    AS_IF([test "$ax_enable_compile_warnings" = "error"],[
-        # "error" flags; -Werror has to be appended unconditionally because
-        # it's not possible to test for
-        #
-        # suggest-attribute=format is disabled because it gives too many false
-        # positives
-        AX_APPEND_FLAG([-Werror],ax_warn_cflags_variable)
-
-        AX_APPEND_COMPILE_FLAGS([ dnl
-            -Wno-suggest-attribute=format dnl
-        ],ax_warn_cflags_variable,[$ax_compiler_flags_test])
-    ])
-
-    # In the flags below, when disabling specific flags, always add *both*
-    # -Wno-foo and -Wno-error=foo. This fixes the situation where (for example)
-    # we enable -Werror, disable a flag, and a build bot passes CFLAGS=-Wall,
-    # which effectively turns that flag back on again as an error.
-    for flag in $ax_warn_cflags_variable; do
-        AS_CASE([$flag],
-                [-Wno-*=*],[],
-                [-Wno-*],[
-                    AX_APPEND_COMPILE_FLAGS([-Wno-error=$(AS_ECHO([$flag]) | $SED 's/^-Wno-//')],
-                                            ax_warn_cflags_variable,
-                                            [$ax_compiler_flags_test])
-                ])
-    done
-
-    AC_LANG_POP([C])
-
-    # Substitute the variables
-    AC_SUBST(ax_warn_cflags_variable)
-])dnl AX_COMPILER_FLAGS
diff --git a/m4/ax_compiler_flags_gir.m4 b/m4/ax_compiler_flags_gir.m4
deleted file mode 100644
index 180f50d..0000000
--- a/m4/ax_compiler_flags_gir.m4
+++ /dev/null
@@ -1,60 +0,0 @@
-# ===========================================================================
-#   http://www.gnu.org/software/autoconf-archive/ax_compiler_flags_gir.html
-# ===========================================================================
-#
-# SYNOPSIS
-#
-#   AX_COMPILER_FLAGS_GIR([VARIABLE], [IS-RELEASE], [EXTRA-BASE-FLAGS], [EXTRA-YES-FLAGS])
-#
-# DESCRIPTION
-#
-#   Add warning flags for the g-ir-scanner (from GObject Introspection) to
-#   VARIABLE, which defaults to WARN_SCANNERFLAGS.  VARIABLE is AC_SUBST-ed
-#   by this macro, but must be manually added to the SCANNERFLAGS variable
-#   for each GIR target in the code base.
-#
-#   This macro depends on the environment set up by AX_COMPILER_FLAGS.
-#   Specifically, it uses the value of $ax_enable_compile_warnings to decide
-#   which flags to enable.
-#
-# LICENSE
-#
-#   Copyright (c) 2015 Philip Withnall <philip@tecnocode.co.uk>
-#
-#   Copying and distribution of this file, with or without modification, are
-#   permitted in any medium without royalty provided the copyright notice
-#   and this notice are preserved.  This file is offered as-is, without any
-#   warranty.
-
-#serial 4
-
-AC_DEFUN([AX_COMPILER_FLAGS_GIR],[
-    AX_REQUIRE_DEFINED([AX_APPEND_FLAG])
-
-    # Variable names
-    m4_define(ax_warn_scannerflags_variable,
-              [m4_normalize(ifelse([$1],,[WARN_SCANNERFLAGS],[$1]))])
-
-    # Base flags
-    AX_APPEND_FLAG([$3],ax_warn_scannerflags_variable)
-
-    AS_IF([test "$ax_enable_compile_warnings" != "no"],[
-        # "yes" flags
-        AX_APPEND_FLAG([ dnl
-            --warn-all dnl
-            $4 dnl
-            $5 dnl
-            $6 dnl
-            $7 dnl
-        ],ax_warn_scannerflags_variable)
-    ])
-    AS_IF([test "$ax_enable_compile_warnings" = "error"],[
-        # "error" flags
-        AX_APPEND_FLAG([ dnl
-            --warn-error dnl
-        ],ax_warn_scannerflags_variable)
-    ])
-
-    # Substitute the variables
-    AC_SUBST(ax_warn_scannerflags_variable)
-])dnl AX_COMPILER_FLAGS
diff --git a/m4/ax_compiler_flags_ldflags.m4 b/m4/ax_compiler_flags_ldflags.m4
deleted file mode 100644
index f393ba4..0000000
--- a/m4/ax_compiler_flags_ldflags.m4
+++ /dev/null
@@ -1,75 +0,0 @@
-# =============================================================================
-#  http://www.gnu.org/software/autoconf-archive/ax_compiler_flags_ldflags.html
-# =============================================================================
-#
-# SYNOPSIS
-#
-#   AX_COMPILER_FLAGS_LDFLAGS([VARIABLE], [IS-RELEASE], [EXTRA-BASE-FLAGS], [EXTRA-YES-FLAGS])
-#
-# DESCRIPTION
-#
-#   Add warning flags for the linker to VARIABLE, which defaults to
-#   WARN_LDFLAGS.  VARIABLE is AC_SUBST-ed by this macro, but must be
-#   manually added to the LDFLAGS variable for each target in the code base.
-#
-#   This macro depends on the environment set up by AX_COMPILER_FLAGS.
-#   Specifically, it uses the value of $ax_enable_compile_warnings to decide
-#   which flags to enable.
-#
-# LICENSE
-#
-#   Copyright (c) 2014, 2015 Philip Withnall <philip@tecnocode.co.uk>
-#
-#   Copying and distribution of this file, with or without modification, are
-#   permitted in any medium without royalty provided the copyright notice
-#   and this notice are preserved.  This file is offered as-is, without any
-#   warranty.
-
-#serial 4
-
-AC_DEFUN([AX_COMPILER_FLAGS_LDFLAGS],[
-    AX_REQUIRE_DEFINED([AX_APPEND_COMPILE_FLAGS])
-    AX_REQUIRE_DEFINED([AX_APPEND_FLAG])
-    AX_REQUIRE_DEFINED([AX_CHECK_COMPILE_FLAG])
-
-    # Variable names
-    m4_define(ax_warn_ldflags_variable,
-              [m4_normalize(ifelse([$1],,[WARN_LDFLAGS],[$1]))])
-
-    # Always pass -Werror=unknown-warning-option to get Clang to fail on bad
-    # flags, otherwise they are always appended to the warn_ldflags variable,
-    # and Clang warns on them for every compilation unit.
-    # If this is passed to GCC, it will explode, so the flag must be enabled
-    # conditionally.
-    AX_CHECK_COMPILE_FLAG([-Werror=unknown-warning-option],[
-        ax_compiler_flags_test="-Werror=unknown-warning-option"
-    ],[
-        ax_compiler_flags_test=""
-    ])
-
-    # Base flags
-    AX_APPEND_COMPILE_FLAGS([ dnl
-        -Wl,--no-as-needed dnl
-        $3 dnl
-    ],ax_warn_ldflags_variable,[$ax_compiler_flags_test])
-
-    AS_IF([test "$ax_enable_compile_warnings" != "no"],[
-        # "yes" flags
-        AX_APPEND_COMPILE_FLAGS([$4 $5 $6 $7],
-                                ax_warn_ldflags_variable,
-                                [$ax_compiler_flags_test])
-    ])
-    AS_IF([test "$ax_enable_compile_warnings" = "error"],[
-        # "error" flags; -Werror has to be appended unconditionally because
-        # it's not possible to test for
-        #
-        # suggest-attribute=format is disabled because it gives too many false
-        # positives
-        AX_APPEND_COMPILE_FLAGS([ dnl
-            -Wl,--fatal-warnings dnl
-        ],ax_warn_ldflags_variable,[$ax_compiler_flags_test])
-    ])
-
-    # Substitute the variables
-    AC_SUBST(ax_warn_ldflags_variable)
-])dnl AX_COMPILER_FLAGS
diff --git a/m4/ax_is_release.m4 b/m4/ax_is_release.m4
deleted file mode 100644
index 9ec6746..0000000
--- a/m4/ax_is_release.m4
+++ /dev/null
@@ -1,69 +0,0 @@
-# ===========================================================================
-#       http://www.gnu.org/software/autoconf-archive/ax_is_release.html
-# ===========================================================================
-#
-# SYNOPSIS
-#
-#   AX_IS_RELEASE(POLICY)
-#
-# DESCRIPTION
-#
-#   Determine whether the code is being configured as a release, or from
-#   git. Set the ax_is_release variable to 'yes' or 'no'.
-#
-#   If building a release version, it is recommended that the configure
-#   script disable compiler errors and debug features, by conditionalising
-#   them on the ax_is_release variable.  If building from git, these
-#   features should be enabled.
-#
-#   The POLICY parameter specifies how ax_is_release is determined. It can
-#   take the following values:
-#
-#    * git-directory:  ax_is_release will be 'no' if a '.git' directory exists
-#    * minor-version:  ax_is_release will be 'no' if the minor version number
-#                      in $PACKAGE_VERSION is odd; this assumes
-#                      $PACKAGE_VERSION follows the 'major.minor.micro' scheme
-#    * micro-version:  ax_is_release will be 'no' if the micro version number
-#                      in $PACKAGE_VERSION is odd; this assumes
-#                      $PACKAGE_VERSION follows the 'major.minor.micro' scheme
-#    * always:         ax_is_release will always be 'yes'
-#    * never:          ax_is_release will always be 'no'
-#
-#   Other policies may be added in future.
-#
-# LICENSE
-#
-#   Copyright (c) 2015 Philip Withnall <philip@tecnocode.co.uk>
-#
-#   Copying and distribution of this file, with or without modification, are
-#   permitted in any medium without royalty provided the copyright notice
-#   and this notice are preserved.
-
-#serial 3
-
-AC_DEFUN([AX_IS_RELEASE],[
-    AC_BEFORE([AC_INIT],[$0])
-
-    m4_case([$1],
-      [git-directory],[
-        # $is_release = (.git directory does not exist)
-        AS_IF([test -d .git],[ax_is_release=no],[ax_is_release=yes])
-      ],
-      [minor-version],[
-        # $is_release = ($minor_version is even)
-        minor_version=`echo "$PACKAGE_VERSION" | sed 's/[[^.]][[^.]]*.\([[^.]][[^.]]*\).*/\1/'`
-        AS_IF([test "$(( $minor_version % 2 ))" -ne 0],
-              [ax_is_release=no],[ax_is_release=yes])
-      ],
-      [micro-version],[
-        # $is_release = ($micro_version is even)
-        micro_version=`echo "$PACKAGE_VERSION" | sed 's/[[^.]]*\.[[^.]]*\.\([[^.]]*\).*/\1/'`
-        AS_IF([test "$(( $micro_version % 2 ))" -ne 0],
-              [ax_is_release=no],[ax_is_release=yes])
-      ],
-      [always],[ax_is_release=yes],
-      [never],[ax_is_release=no],
-      [
-        AC_MSG_ERROR([Invalid policy. Valid policies: git-directory, minor-version.])
-      ])
-])
diff --git a/m4/ax_require_defined.m4 b/m4/ax_require_defined.m4
deleted file mode 100644
index cae1111..0000000
--- a/m4/ax_require_defined.m4
+++ /dev/null
@@ -1,37 +0,0 @@
-# ===========================================================================
-#    http://www.gnu.org/software/autoconf-archive/ax_require_defined.html
-# ===========================================================================
-#
-# SYNOPSIS
-#
-#   AX_REQUIRE_DEFINED(MACRO)
-#
-# DESCRIPTION
-#
-#   AX_REQUIRE_DEFINED is a simple helper for making sure other macros have
-#   been defined and thus are available for use.  This avoids random issues
-#   where a macro isn't expanded.  Instead the configure script emits a
-#   non-fatal:
-#
-#     ./configure: line 1673: AX_CFLAGS_WARN_ALL: command not found
-#
-#   It's like AC_REQUIRE except it doesn't expand the required macro.
-#
-#   Here's an example:
-#
-#     AX_REQUIRE_DEFINED([AX_CHECK_LINK_FLAG])
-#
-# LICENSE
-#
-#   Copyright (c) 2014 Mike Frysinger <vapier@gentoo.org>
-#
-#   Copying and distribution of this file, with or without modification, are
-#   permitted in any medium without royalty provided the copyright notice
-#   and this notice are preserved. This file is offered as-is, without any
-#   warranty.
-
-#serial 1
-
-AC_DEFUN([AX_REQUIRE_DEFINED], [dnl
-  m4_ifndef([$1], [m4_fatal([macro ]$1[ is not defined; is a m4 file missing?])])
-])dnl AX_REQUIRE_DEFINED
diff --git a/m4/introspection.m4 b/m4/introspection.m4
deleted file mode 100644
index bfc52be..0000000
--- a/m4/introspection.m4
+++ /dev/null
@@ -1,94 +0,0 @@
-dnl -*- mode: autoconf -*-
-dnl Copyright 2009 Johan Dahlin
-dnl
-dnl This file is free software; the author(s) gives unlimited
-dnl permission to copy and/or distribute it, with or without
-dnl modifications, as long as this notice is preserved.
-dnl
-
-# serial 1
-
-m4_define([_GOBJECT_INTROSPECTION_CHECK_INTERNAL],
-[
-    AC_BEFORE([AC_PROG_LIBTOOL],[$0])dnl setup libtool first
-    AC_BEFORE([AM_PROG_LIBTOOL],[$0])dnl setup libtool first
-    AC_BEFORE([LT_INIT],[$0])dnl setup libtool first
-
-    dnl enable/disable introspection
-    m4_if([$2], [require],
-    [dnl
-        enable_introspection=yes
-    ],[dnl
-        AC_ARG_ENABLE(introspection,
-                  AS_HELP_STRING([--enable-introspection[=@<:@no/auto/yes@:>@]],
-                                 [Enable introspection for this build]),,
-                                 [enable_introspection=auto])
-    ])dnl
-
-    AC_MSG_CHECKING([for gobject-introspection])
-
-    dnl presence/version checking
-    AS_CASE([$enable_introspection],
-    [no], [dnl
-        found_introspection="no (disabled, use --enable-introspection to enable)"
-    ],dnl
-    [yes],[dnl
-        PKG_CHECK_EXISTS([gobject-introspection-1.0],,
-                         AC_MSG_ERROR([gobject-introspection-1.0 is not installed]))
-        PKG_CHECK_EXISTS([gobject-introspection-1.0 >= $1],
-                         found_introspection=yes,
-                         AC_MSG_ERROR([You need to have gobject-introspection >= $1 installed to build AC_PACKAGE_NAME]))
-    ],dnl
-    [auto],[dnl
-        PKG_CHECK_EXISTS([gobject-introspection-1.0 >= $1], found_introspection=yes, found_introspection=no)
-    ],dnl
-    [dnl
-        AC_MSG_ERROR([invalid argument passed to --enable-introspection, should be one of @<:@no/auto/yes@:>@])
-    ])dnl
-
-    AC_MSG_RESULT([$found_introspection])
-
-    INTROSPECTION_SCANNER=
-    INTROSPECTION_COMPILER=
-    INTROSPECTION_GENERATE=
-    INTROSPECTION_GIRDIR=
-    INTROSPECTION_TYPELIBDIR=
-    if test "x$found_introspection" = "xyes"; then
-       INTROSPECTION_SCANNER=`$PKG_CONFIG --variable=g_ir_scanner gobject-introspection-1.0`
-       INTROSPECTION_COMPILER=`$PKG_CONFIG --variable=g_ir_compiler gobject-introspection-1.0`
-       INTROSPECTION_GENERATE=`$PKG_CONFIG --variable=g_ir_generate gobject-introspection-1.0`
-       INTROSPECTION_GIRDIR=`$PKG_CONFIG --variable=girdir gobject-introspection-1.0`
-       INTROSPECTION_TYPELIBDIR="$($PKG_CONFIG --variable=typelibdir gobject-introspection-1.0)"
-       INTROSPECTION_CFLAGS=`$PKG_CONFIG --cflags gobject-introspection-1.0`
-       INTROSPECTION_LIBS=`$PKG_CONFIG --libs gobject-introspection-1.0`
-       INTROSPECTION_MAKEFILE=`$PKG_CONFIG --variable=datadir gobject-introspection-1.0`/gobject-introspection-1.0/Makefile.introspection
-    fi
-    AC_SUBST(INTROSPECTION_SCANNER)
-    AC_SUBST(INTROSPECTION_COMPILER)
-    AC_SUBST(INTROSPECTION_GENERATE)
-    AC_SUBST(INTROSPECTION_GIRDIR)
-    AC_SUBST(INTROSPECTION_TYPELIBDIR)
-    AC_SUBST(INTROSPECTION_CFLAGS)
-    AC_SUBST(INTROSPECTION_LIBS)
-    AC_SUBST(INTROSPECTION_MAKEFILE)
-
-    AM_CONDITIONAL(HAVE_INTROSPECTION, test "x$found_introspection" = "xyes")
-])
-
-
-dnl Usage:
-dnl   GOBJECT_INTROSPECTION_CHECK([minimum-g-i-version])
-
-AC_DEFUN([GOBJECT_INTROSPECTION_CHECK],
-[
-  _GOBJECT_INTROSPECTION_CHECK_INTERNAL([$1])
-])
-
-dnl Usage:
-dnl   GOBJECT_INTROSPECTION_REQUIRE([minimum-g-i-version])
-
-
-AC_DEFUN([GOBJECT_INTROSPECTION_REQUIRE],
-[
-  _GOBJECT_INTROSPECTION_CHECK_INTERNAL([$1], [require])
-])
diff --git a/m4/vapigen.m4 b/m4/vapigen.m4
deleted file mode 100644
index c909726..0000000
--- a/m4/vapigen.m4
+++ /dev/null
@@ -1,43 +0,0 @@
-
-dnl vala.m4
-dnl
-dnl Copyright 2010 Marc-Andre Lureau
-dnl Copyright 2011 Rodney Dawes <dobey.pwns@gmail.com>
-dnl
-dnl This library is free software; you can redistribute it and/or
-dnl modify it under the terms of the GNU Lesser General Public
-dnl License as published by the Free Software Foundation; either
-dnl version 2.1 of the License, or (at your option) any later version.
-dnl
-dnl This library is distributed in the hope that it will be useful,
-dnl but WITHOUT ANY WARRANTY; without even the implied warranty of
-dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-dnl Lesser General Public License for more details.
-dnl
-dnl You should have received a copy of the GNU Lesser General Public
-dnl License along with this library; if not, write to the Free Software
-dnl Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
-
-dnl dropped everything but VALA_PROG_VAPIGEN - Jens Georg <mail@jensge.org>
-
-# Check whether the Vala API Generator exists in `PATH'. If it is found,
-# the variable VAPIGEN is set. Optionally a minimum release number of the
-# generator can be requested.
-#
-# VALA_PROG_VAPIGEN([MINIMUM-VERSION])
-# ------------------------------------
-AC_DEFUN([GUPNP_PROG_VAPIGEN],
-[AC_PATH_PROG([VAPIGEN], [vapigen], [])
-  AS_IF([test -z "$VAPIGEN"],
-    [AC_MSG_WARN([No Vala API Generator found. You will not be able to generate .vapi files.])],
-    [AS_IF([test -n "$1"],
-        [AC_MSG_CHECKING([$VAPIGEN is at least version $1])
-         am__vapigen_version=`$VAPIGEN --version | sed 's/Vala API Generator  *//'`
-         AS_VERSION_COMPARE([$1], ["$am__vapigen_version"],
-           [AC_MSG_RESULT([yes])],
-           [AC_MSG_RESULT([yes])],
-           [AC_MSG_RESULT([no])
-            AC_MSG_WARN([Vala API Generator $1 not found.])
-            VAPIGEN=""
-           ])])])
-])
diff --git a/tests/Makefile.am b/tests/Makefile.am
deleted file mode 100644
index 51fd784..0000000
--- a/tests/Makefile.am
+++ /dev/null
@@ -1,30 +0,0 @@
-AM_TESTS_ENVIRONMENT = \
-	export G_SLICE=debug-blocks \
-	LD_LIBRARY_PATH=$(top_builddir)/libgupnp-dlna/.libs:$(LD_LIBRARY_PATH) \
-	MEDIA_DIR="$(srcdir)/media" FILE_LIST="$(srcdir)/media/media-list.txt" \
-	GUPNP_DLNA_PROFILE_DIR=$(abs_top_srcdir)/data \
-	GUPNP_DLNA_METADATA_BACKEND_DIR=$(top_builddir)/libgupnp-dlna/metadata-backends/gstreamer/.libs;
-TESTS = $(check_PROGRAMS) test-discoverer.sh
-
-check_SCRIPTS = test-discoverer.sh
-check_PROGRAMS = sets
-
-sets_SOURCES = \
-	sets.c
-sets_LDADD = \
-	$(GLIB_LIBS) \
-	$(GOBJECT_LIBS) \
-	$(LIBXML_LIBS) \
-	$(GMODULE_LIBS) \
-	$(top_builddir)/libgupnp-dlna/libgupnp-dlna-2.0.la
-sets_LDFLAGS = $(WARN_LDFLAGS)
-sets_CFLAGS = \
-	$(GLIB_CFLAGS) \
-	$(GOBJECT_CFLAGS) \
-	$(LIBXML_CFLAGS) \
-	$(GMODULE_CFLAGS) \
-	$(WARN_CFLAGS) \
-	-I$(top_srcdir) \
-	-I$(top_srcdir)/libgupnp-dlna
-
-EXTRA_DIST = meson.build
diff --git a/tests/old/Makefile.am b/tests/old/Makefile.am
deleted file mode 100644
index c668060..0000000
--- a/tests/old/Makefile.am
+++ /dev/null
@@ -1,17 +0,0 @@
-SUBDIRS = . experiment
-
-noinst_PROGRAMS = dlna-profile-parser dlna-encoding
-
-AM_CFLAGS = -I$(top_srcdir) $(GST_CFLAGS) $(GST_PBU_CFLAGS) $(LIBXML_CFLAGS) $(WARN_CFLAGS)
-LIBS = $(GST_LIBS) \
-       $(LIBXML_LIBS) \
-       $(GST_PBU_LIBS) \
-       $(top_builddir)/libgupnp-dlna/libgupnp-dlna-1.0.la
-
-dlna_profile_parser_SOURCES = dlna-profile-parser.c
-dlna_profile_parser_LDFLAGS = $(WARN_LDFLAGS)
-dlna_encoding_SOURCES = dlna-encoding.c
-dlna_encoding_LDFLAGS = $(WARN_LDFLAGS)
-
-TESTS_ENVIRONMENT = MEDIA_DIR="$(srcdir)/media" FILE_LIST="$(srcdir)/media/media-list.txt" ${SHELL}
-TESTS = test-discoverer.sh
diff --git a/tools/Makefile.am b/tools/Makefile.am
deleted file mode 100644
index f4a9eb0..0000000
--- a/tools/Makefile.am
+++ /dev/null
@@ -1,27 +0,0 @@
-bin_PROGRAMS = \
-	gupnp-dlna-info-2.0 \
-	gupnp-dlna-ls-profiles-2.0
-
-AM_CFLAGS = \
-	-I$(top_srcdir) \
-	$(GLIB_CFLAGS) \
-	$(GOBJECT_CFLAGS) \
-	$(LIBXML_CFLAGS) \
-	$(GMODULE_CFLAGS) \
-	$(WARN_CFLAGS)
-LIBS = \
-	$(GLIB_LIBS) \
-	$(GOBJECT_LIBS) \
-	$(LIBXML_LIBS) \
-	$(GMODULE_LIBS) \
-	$(top_builddir)/libgupnp-dlna/libgupnp-dlna-2.0.la
-
-gupnp_dlna_info_2_0_LDFLAGS = $(WARN_LDFLAGS)
-gupnp_dlna_info_2_0_SOURCES = \
-	gupnp-dlna-info.c
-
-gupnp_dlna_ls_profiles_2_0_LDFLAGS = $(WARN_LDFLAGS)
-gupnp_dlna_ls_profiles_2_0_SOURCES = \
-	gupnp-dlna-ls-profiles.c
-
-EXTRA_DIST = meson.build
diff --git a/vala/Makefile.am b/vala/Makefile.am
deleted file mode 100644
index 08a2337..0000000
--- a/vala/Makefile.am
+++ /dev/null
@@ -1,67 +0,0 @@
-if HAVE_INTROSPECTION
-if HAVE_VAPIGEN
-gupnp-dlna-2.0.vapi: gupnp-dlna-2.0.stamp
-	@true
-
-gupnp-dlna-2.0.stamp: $(builddir)/../libgupnp-dlna/GUPnPDLNA-2.0.gir \
-		$(srcdir)/GUPnPDLNA-2.0.metadata \
-		$(srcdir)/gupnp-dlna-2.0-custom.vala
-	$(AM_V_GEN)$(VAPIGEN) --metadatadir=$(srcdir) \
-			      --library=gupnp-dlna-2.0 \
-			      $(builddir)/../libgupnp-dlna/GUPnPDLNA-2.0.gir \
-			      $(srcdir)/gupnp-dlna-2.0-custom.vala && \
-	echo timestamp > $(@F)
-
-vapidir = $(datadir)/vala/vapi
-vapi_DATA = \
-	gupnp-dlna-2.0.vapi \
-	$(srcdir)/gupnp-dlna-2.0.deps
-CLEANFILES = \
-	gupnp-dlna-2.0.vapi \
-	gupnp-dlna-2.0.stamp
-EXTRA_DIST = \
-	gupnp-dlna-2.0.deps \
-	GUPnPDLNA-2.0.metadata \
-	gupnp-dlna-2.0-custom.vala \
-	gupnp-dlna-2.0.vapi \
-	gupnp-dlna-2.0.stamp \
-	meson.build
-
-if GSTREAMER_METADATA_BACKEND_ENABLED
-gupnp-dlna-gst-2.0.vapi: gupnp-dlna-gst-2.0.stamp
-	@true
-
-gupnp-dlna-gst-2.0.stamp: $(builddir)/../libgupnp-dlna/GUPnPDLNAGst-2.0.gir \
-		$(srcdir)/GUPnPDLNAGst-2.0.metadata \
-		$(srcdir)/gupnp-dlna-gst-2.0-custom.vala \
-		gupnp-dlna-2.0.vapi
-	$(AM_V_GEN)$(VAPIGEN) --metadatadir=$(srcdir) \
-			      --library=gupnp-dlna-gst-2.0 \
-			      --vapidir=$(builddir) \
-			      --girdir=$(builddir)/../libgupnp-dlna \
-			      --pkg gupnp-dlna-2.0 \
-			      --pkg gstreamer-1.0 \
-			      --pkg gstreamer-pbutils-1.0 \
-			      --pkg gstreamer-video-1.0 \
-			      --pkg gstreamer-base-1.0 \
-			      $(builddir)/../libgupnp-dlna/GUPnPDLNAGst-2.0.gir \
-			      $(srcdir)/gupnp-dlna-gst-2.0-custom.vala && \
-	echo timestamp > $(@F)
-
-
-vapi_DATA += \
-	gupnp-dlna-gst-2.0.vapi \
-	$(srcdir)/gupnp-dlna-gst-2.0.deps
-CLEANFILES += \
-	gupnp-dlna-gst-2.0.vapi \
-	gupnp-dlna-gst-2.0.stamp
-EXTRA_DIST += \
-	gupnp-dlna-gst-2.0.deps \
-	GUPnPDLNAGst-2.0.metadata \
-	gupnp-dlna-gst-2.0-custom.vala \
-	gupnp-dlna-gst-2.0.vapi \
-	gupnp-dlna-gst-2.0.stamp
-endif
-
-endif
-endif
-- 
GitLab

From 89cb27748de60658f4fe3a38eb941d064c0ab8ca Mon Sep 17 00:00:00 2001
From: Jens Georg <mail@jensge.org>
Date: Sat, 13 Apr 2024 14:46:20 +0200
Subject: [PATCH] build: Set vapi variable for use in subproject

---
 vala/meson.build | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/vala/meson.build b/vala/meson.build
index fd30562..ce672af 100644
--- a/vala/meson.build
+++ b/vala/meson.build
@@ -9,7 +9,7 @@ gupnp_dlna_vapi = gnome.generate_vapi(
     install : true
 )
 
-gnome.generate_vapi(
+gupnp_dlna_gst_vapi = gnome.generate_vapi(
     'gupnp-dlna-gst-2.0',
     sources : [
         gupnp_dlna_gst_gir.get(0),
-- 
GitLab

