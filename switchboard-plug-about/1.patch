From 31b786a141514d153cd4f66ce14bb5590d5e4675 Mon Sep 17 00:00:00 2001
From: Nathaniel Russell <46272571+nater1983@users.noreply.github.com>
Date: Sun, 24 Dec 2023 21:33:25 -0600
Subject: [PATCH] Update OperatingSystemView.vala

---
 src/Views/OperatingSystemView.vala | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/Views/OperatingSystemView.vala b/src/Views/OperatingSystemView.vala
index a5767f0c..4e4a7a9f 100644
--- a/src/Views/OperatingSystemView.vala
+++ b/src/Views/OperatingSystemView.vala
@@ -193,7 +193,7 @@ public class About.OperatingSystemView : Gtk.Box {
         // Upstream distro version (for "Built on" text)
         // FIXME: Add distro specific field to /etc/os-release and use that instead
         // Like "ELEMENTARY_UPSTREAM_DISTRO_NAME" or something
-        var file = File.new_for_path ("/usr/lib/upstream-os-release");
+        var file = File.new_for_path ("/etc/os-release");
         string? upstream_release = null;
         try {
             var dis = new DataInputStream (yield file.read_async ());

diff '--color=auto' -Naur switchboard-plug-about-8.0.0_orig/src/DBus/SystemUpdate.vala switchboard-plug-about-8.0.0/src/DBus/SystemUpdate.vala
--- switchboard-plug-about-8.0.0_orig/src/DBus/SystemUpdate.vala	2024-07-27 16:42:59.159910518 +0200
+++ switchboard-plug-about-8.0.0/src/DBus/SystemUpdate.vala	2024-07-27 16:44:12.906580557 +0200
@@ -17,7 +17,6 @@
     public struct UpdateDetails {
         string[] packages;
         int size;
-        Pk.Info[] info;
     }
 
     public signal void state_changed ();
diff '--color=auto' -Naur switchboard-plug-about-8.0.0_orig/src/meson.build switchboard-plug-about-8.0.0/src/meson.build
--- switchboard-plug-about-8.0.0_orig/src/meson.build	2024-07-27 16:42:59.159910518 +0200
+++ switchboard-plug-about-8.0.0/src/meson.build	2024-07-27 16:43:43.599912549 +0200
@@ -41,7 +41,6 @@
         dependency('gtk4'),
         dependency('libadwaita-1'),
         dependency('libgtop-2.0'),
-        dependency('packagekit-glib2'),
         dependency('gudev-1.0'),
         dependency('udisks2'),
         dependency('polkit-gobject-1'),
diff '--color=auto' -Naur switchboard-plug-about-8.0.0_orig/src/Views/OperatingSystemView.vala switchboard-plug-about-8.0.0/src/Views/OperatingSystemView.vala
--- switchboard-plug-about-8.0.0_orig/src/Views/OperatingSystemView.vala	2024-07-27 16:42:59.159910518 +0200
+++ switchboard-plug-about-8.0.0/src/Views/OperatingSystemView.vala	2024-07-27 16:45:15.576583422 +0200
@@ -497,10 +497,6 @@
                         details.packages.length
                     ).printf (details.packages.length);
 
-                    if (Pk.Info.SECURITY in details.info) {
-                        updates_image.icon_name = "software-update-urgent";
-                    }
-
                     packages.splice (0, packages.get_n_items (), details.packages);
                 } catch (Error e) {
                     updates_description.label = _("Unable to determine number of updates");

 
     construct {
