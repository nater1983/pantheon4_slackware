From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Danielle=20For=C3=A9?= <danielle@elementary.io>
Date: Tue, 30 Jan 2024 15:49:04 -0800
Subject: [PATCH] Revert "OperatingSystemView: use urgent icon if updates contain security (#292)"

This reverts commit 023f86b9e97c192d4f649ba788d660fb5e77582c.

---
 README.md                          | 1 -
 src/DBus/SystemUpdate.vala         | 1 -
 src/Views/OperatingSystemView.vala | 4 ----
 src/meson.build                    | 1 -
 4 files changed, 0 insertions(+), 7 deletions(-)

diff --git a/README.md b/README.md
index 30c0432a..7e124621 100644
--- a/README.md
+++ b/README.md
@@ -16,7 +16,6 @@ You'll need the following dependencies:
 * libudisks2-dev
 * libadwaita-1-dev
 * libappstream-dev
-* libpackagekit-glib2-dev
 * meson
 * valac
 * switcheroo-control (at runtime)
diff --git a/src/DBus/SystemUpdate.vala b/src/DBus/SystemUpdate.vala
index 5e9a16ca..4929a5c2 100644
--- a/src/DBus/SystemUpdate.vala
+++ b/src/DBus/SystemUpdate.vala
@@ -17,7 +17,6 @@ public interface SystemUpdate : Object {
     public struct UpdateDetails {
         string[] packages;
         int size;
-        Pk.Info[] info;
     }
 
     public signal void state_changed ();
diff --git a/src/Views/OperatingSystemView.vala b/src/Views/OperatingSystemView.vala
index ebfd28eb..b94ae18b 100644
--- a/src/Views/OperatingSystemView.vala
+++ b/src/Views/OperatingSystemView.vala
@@ -373,10 +373,6 @@ public class About.OperatingSystemView : Gtk.Box {
                         details.packages.length
                     ).printf (details.packages.length);
 
-                    if (Pk.Info.SECURITY in details.info) {
-                        updates_image.icon_name = "software-update-urgent";
-                    }
-
                     packages.splice (0, packages.get_n_items (), details.packages);
                 } catch (Error e) {
                     updates_description.label = _("Unable to determine number of updates");
diff --git a/src/meson.build b/src/meson.build
index bc8da285..5c4edf49 100644
--- a/src/meson.build
+++ b/src/meson.build
@@ -38,7 +38,6 @@ shared_module(
         dependency('gtk4'),
         dependency('libadwaita-1'),
         dependency('libgtop-2.0'),
-        dependency('packagekit-glib2'),
         dependency('gudev-1.0'),
         dependency('udisks2'),
         appstream_dep,
"""

# Save the modified patch to a new file.
patch_filename_modified = "/mnt/data/revert_patch_modified.diff"
with open(patch_filename_modified, "w") as f:
    f.write(revert_patch_modified)

patch_filename_modified
